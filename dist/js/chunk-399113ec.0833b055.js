(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-399113ec"],{"34d7":function(t,e,i){},"355f":function(t,e,i){t.exports=i.p+"img/slide-2.d358243b.jpg"},"4db3":function(t,e,i){"use strict";var s=i("34d7"),r=i.n(s);r.a},5492:function(t,e,i){t.exports=i.p+"img/slide-3.80666881.jpg"},"69a7":function(t,e,i){t.exports=i.p+"img/slide-0.6e5db33c.jpg"},7156:function(t,e,i){var s=i("861d"),r=i("d2bb");t.exports=function(t,e,i){var n,o;return r&&"function"==typeof(n=e.constructor)&&n!==i&&s(o=n.prototype)&&o!==i.prototype&&r(t,o),t}},"71c4":function(t,e,i){t.exports=i.p+"img/slide-1.a976180d.jpg"},a8fb:function(t,e,i){var s={"./slide-0.jpg":"69a7","./slide-1.jpg":"71c4","./slide-2.jpg":"355f","./slide-3.jpg":"5492","./slide-4.jpg":"c017"};function r(t){var e=n(t);return i(e)}function n(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}r.keys=function(){return Object.keys(s)},r.resolve=n,t.exports=r,r.id="a8fb"},a9e3:function(t,e,i){"use strict";var s=i("83ab"),r=i("da84"),n=i("94ca"),o=i("6eeb"),a=i("5135"),c=i("c6b6"),l=i("7156"),u=i("c04e"),h=i("d039"),d=i("7c73"),f=i("241c").f,g=i("06cf").f,m=i("9bf2").f,v=i("58a8").trim,p="Number",b=r[p],w=b.prototype,y=c(d(w))==p,k=function(t){var e,i,s,r,n,o,a,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=v(l),e=l.charCodeAt(0),43===e||45===e){if(i=l.charCodeAt(2),88===i||120===i)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:s=2,r=49;break;case 79:case 111:s=8,r=55;break;default:return+l}for(n=l.slice(2),o=n.length,a=0;a<o;a++)if(c=n.charCodeAt(a),c<48||c>r)return NaN;return parseInt(n,s)}return+l};if(n(p,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var x,C=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof C&&(y?h((function(){w.valueOf.call(i)})):c(i)!=p)?l(new b(k(e)),i,C):k(e)},_=s?f(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;_.length>I;I++)a(b,x=_[I])&&!a(C,x)&&m(C,x,g(b,x));C.prototype=w,w.constructor=C,o(r,p,C)}},c017:function(t,e,i){t.exports=i.p+"img/slide-4.69bbd474.jpg"},d81d:function(t,e,i){"use strict";var s=i("23e7"),r=i("b727").map,n=i("1dde"),o=i("ae40"),a=n("map"),c=o("map");s({target:"Array",proto:!0,forced:!a||!c},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},e1fa:function(t,e,i){},edb6:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showSlide,expression:"showSlide"}],staticClass:"slideShadow"},[i("transition",[i("div",{staticClass:"slideSty animated bounce"},[i("slide-verify",{ref:"slideDiv",attrs:{sliderText:t.text,w:350,h:175},on:{success:t.onSuccess,fail:t.onFail}}),i("div",{staticClass:"iconBtn"},[i("i",{staticClass:"el-icon-circle-close",on:{click:function(e){t.showSlide=!1}}}),i("i",{staticClass:"el-icon-refresh",on:{click:t.refresh}})])],1)])],1),i("div",{staticClass:"loginBox"},[t._m(0),i("div",{staticClass:"loginCon"},[t._m(1),i("el-form",{ref:"loginForm",attrs:{rules:t.rules,model:t.ruleForm}},[i("el-form-item",{attrs:{prop:"username"}},[i("el-input",{attrs:{placeholder:"请输入账号","prefix-icon":"el-icon-user"},model:{value:t.ruleForm.username,callback:function(e){t.$set(t.ruleForm,"username",e)},expression:"ruleForm.username"}})],1),i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{attrs:{placeholder:"请输入密码","prefix-icon":"el-icon-lock","show-password":""},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1),i("el-button",{staticClass:"loginBtn",attrs:{type:"primary"},on:{click:function(e){return t.loginYz("loginForm")}}},[t._v("登录")])],1)],1)])])},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("h2",{staticClass:"loginH2"},[i("strong",[t._v("Vue")]),t._v(" 后台管理系统")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"titleDiv"},[i("h3",[t._v("Sign up now")]),i("p",[t._v("Enter your username and password to log on:")]),i("i",{staticClass:"el-icon-key"})])}],n=(i("13d5"),i("b64b"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"slide-verify",attrs:{id:"slideVerify",onselectstart:"return false;"}},[i("canvas",{ref:"canvas",attrs:{width:t.w,height:t.h}}),i("div",{staticClass:"slide-verify-refresh-icon",on:{click:t.refresh}}),i("canvas",{ref:"block",staticClass:"slide-verify-block",attrs:{width:t.w,height:t.h}}),i("div",{staticClass:"slide-verify-slider",class:{"container-active":t.containerActive,"container-success":t.containerSuccess,"container-fail":t.containerFail}},[i("div",{staticClass:"slide-verify-slider-mask",style:{width:t.sliderMaskWidth}},[i("div",{staticClass:"slide-verify-slider-mask-item",style:{left:t.sliderLeft},on:{mousedown:t.sliderDown,touchstart:t.touchStartEvent,touchmove:t.touchMoveEvent,touchend:t.touchEndEvent}},[i("i",{staticClass:"el-icon-arrow-right"})])]),i("span",{staticClass:"slide-verify-slider-text"},[t._v(t._s(t.sliderText))])])])}),o=[],a=(i("d81d"),i("a9e3"),Math.PI);function c(t,e){return t+e}function l(t){return t*t}var u={name:"SlideVerify",props:{l:{type:Number,default:42},r:{type:Number,default:10},w:{type:Number,default:310},h:{type:Number,default:155},sliderText:{type:String,default:"Slide filled right"}},data:function(){return{containerActive:!1,containerSuccess:!1,containerFail:!1,canvasCtx:null,blockCtx:null,block:null,block_x:void 0,block_y:void 0,L:this.l+2*this.r+3,img:void 0,originX:void 0,originY:void 0,isMouseDown:!1,trail:[],sliderLeft:0,sliderMaskWidth:0}},mounted:function(){this.init()},methods:{init:function(){this.initDom(),this.initImg(),this.bindEvents()},initDom:function(){this.block=this.$refs.block,this.canvasCtx=this.$refs.canvas.getContext("2d"),this.blockCtx=this.block.getContext("2d")},initImg:function(){var t=this,e=this.createImg((function(){t.drawBlock(),t.canvasCtx.drawImage(e,0,0,t.w,t.h),t.blockCtx.drawImage(e,0,0,t.w,t.h);var i=t.block_x,s=t.block_y,r=t.r,n=t.L,o=s-2*r-1,a=t.blockCtx.getImageData(i,o,n,n);t.block.width=n,t.blockCtx.putImageData(a,0,o)}));this.img=e},drawBlock:function(){this.block_x=this.getRandomNumberByRange(this.L+10,this.w-(this.L+10)),this.block_y=this.getRandomNumberByRange(10+2*this.r,this.h-(this.L+10)),this.draw(this.canvasCtx,this.block_x,this.block_y,"fill"),this.draw(this.blockCtx,this.block_x,this.block_y,"clip")},draw:function(t,e,i,s){var r=this.l,n=this.r;t.beginPath(),t.moveTo(e,i),t.arc(e+r/2,i-n+2,n,.72*a,2.26*a),t.lineTo(e+r,i),t.arc(e+r+n-2,i+r/2,n,1.21*a,2.78*a),t.lineTo(e+r,i+r),t.lineTo(e,i+r),t.arc(e+n-2,i+r/2,n+.4,2.76*a,1.24*a,!0),t.lineTo(e,i),t.lineWidth=2,t.fillStyle="rgba(255, 255, 255, 0.8)",t.strokeStyle="rgba(255, 255, 255, 0.8)",t.stroke(),t[s](),t.globalCompositeOperation="xor"},createImg:function(t){var e=this,i=document.createElement("img");return i.crossOrigin="Anonymous",i.onload=t,i.onerror=function(){i.src=e.getRandomImg()},i.src=this.getRandomImg(),i},getRandomImg:function(){return i("a8fb")("./slide-".concat(this.getRandomNumberByRange(0,4),".jpg"))},getRandomNumberByRange:function(t,e){return Math.round(Math.random()*(e-t)+t)},refresh:function(){this.reset(),this.$emit("refresh")},sliderDown:function(t){this.originX=t.clientX,this.originY=t.clientY,this.isMouseDown=!0},touchStartEvent:function(t){this.originX=t.changedTouches[0].pageX,this.originY=t.changedTouches[0].pageY,this.isMouseDown=!0},bindEvents:function(){var t=this;document.addEventListener("mousemove",(function(e){if(!t.isMouseDown)return!1;var i=e.clientX-t.originX,s=e.clientY-t.originY;if(i<0||i+38>=t.w)return!1;t.sliderLeft=i+"px";var r=(t.w-40-20)/(t.w-40)*i;t.block.style.left=r+"px",t.containerActive=!0,t.sliderMaskWidth=i+"px",t.trail.push(s)})),document.addEventListener("mouseup",(function(e){if(!t.isMouseDown)return!1;if(t.isMouseDown=!1,e.clientX===t.originX)return!1;t.containerActive=!1;var i=t.verify(),s=i.spliced,r=i.TuringTest;s?r?(t.containerSuccess=!0,t.$emit("success")):(t.containerFail=!0,t.sliderText="try again",t.reset()):(t.containerFail=!0,t.$emit("fail"),setTimeout((function(){t.reset()}),1e3))}))},touchMoveEvent:function(t){if(!this.isMouseDown)return!1;var e=t.changedTouches[0].pageX-this.originX,i=t.changedTouches[0].pageY-this.originY;if(e<0||e+38>=this.w)return!1;this.sliderLeft=e+"px";var s=(this.w-40-20)/(this.w-40)*e;this.block.style.left=s+"px",this.containerActive=!0,this.sliderMaskWidth=e+"px",this.trail.push(i)},touchEndEvent:function(t){var e=this;if(!this.isMouseDown)return!1;if(this.isMouseDown=!1,t.changedTouches[0].pageX===this.originX)return!1;this.containerActive=!1;var i=this.verify(),s=i.spliced,r=i.TuringTest;s?r?(this.containerSuccess=!0,this.$emit("success")):(this.containerFail=!0,this.sliderText="try again",this.reset()):(this.containerFail=!0,this.$emit("fail"),setTimeout((function(){e.reset()}),1e3))},verify:function(){var t=this.trail,e=t.reduce(c)/t.length,i=t.map((function(t){return t-e})),s=Math.sqrt(i.map(l).reduce(c)/t.length),r=parseInt(this.block.style.left);return{spliced:Math.abs(r-this.block_x)<10,TuringTest:e!==s}},reset:function(){this.containerActive=!1,this.containerSuccess=!1,this.containerFail=!1,this.sliderLeft=0,this.block.style.left=0,this.sliderMaskWidth=0;var t=this.w,e=this.h;this.canvasCtx.clearRect(0,0,t,e),this.blockCtx.clearRect(0,0,t,e),this.block.width=t,this.img.src=this.getRandomImg()}}},h=u,d=(i("f593"),i("2877")),f=Object(d["a"])(h,n,o,!1,null,"1beeebfc",null),g=f.exports,m={data:function(){return{notifyObj:null,text:"向右滑动",showSlide:!1,ruleForm:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},redirect:void 0,otherQuery:{}}},watch:{$route:{handler:function(t){var e=t.query;e&&(this.redirect=e.redirect,this.otherQuery=this.getOtherQuery(e))},immediate:!0}},methods:{onSuccess:function(){this.showSlide=!1,this._login()},onFail:function(){this.$message.error("验证失败")},refresh:function(){this.$refs.slideDiv.reset()},loginYz:function(t){var e=this;this.$refs[t].validate((function(t){t&&(e.showSlide=!0)}))},_login:function(){var t=this;this.$store.dispatch("user/login",this.ruleForm).then((function(e){2e4===!e.data.code?t.refresh():(t.$router.push({path:t.redirect||"/",query:t.otherQuery}),t.notifyObj&&t.notifyObj.close(),t.notifyObj=null)})).catch((function(e){t.refresh(),t.$message.error(e)}))},getOtherQuery:function(t){return Object.keys(t).reduce((function(e,i){return"redirect"!==i&&(e[i]=t[i]),e}),{})}},components:{SlideVerify:g}},v=m,p=(i("4db3"),Object(d["a"])(v,s,r,!1,null,"50e365d6",null));e["default"]=p.exports},f593:function(t,e,i){"use strict";var s=i("e1fa"),r=i.n(s);r.a}}]);
//# sourceMappingURL=chunk-399113ec.0833b055.js.map